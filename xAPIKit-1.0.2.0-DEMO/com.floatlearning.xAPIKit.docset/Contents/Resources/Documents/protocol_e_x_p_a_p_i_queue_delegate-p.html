<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>xAPI iOS SDK: &lt;EXPAPIQueueDelegate&gt; Protocol Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">xAPI iOS SDK
   &#160;<span id="projectnumber">1.0.0.1</span>
   </div>
   <div id="projectbrief">Implementation of the xAPI for iOS.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Instance Methods</a> &#124;
<a href="protocol_e_x_p_a_p_i_queue_delegate-p-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">&lt;EXPAPIQueueDelegate&gt; Protocol Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Classes implementing the <a class="el" href="protocol_e_x_p_a_p_i_queue_delegate-p.html" title="Classes implementing the EXPAPIQueueDelegate protocol are eligible for receiving delegate callbacks f...">EXPAPIQueueDelegate</a> protocol are eligible for receiving delegate callbacks from a <a class="el" href="interface_e_x_p_a_p_i.html" title="Convenience class for interacting with the xAPI. ">EXPAPI</a> instance about the status of statements it has in its queue.  
 <a href="protocol_e_x_p_a_p_i_queue_delegate-p.html#details">More...</a></p>

<p>Inherits &lt;NSObject&gt;.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Instance Methods</h2></td></tr>
<tr class="memitem:adda3044806531c25563271f7ed94f368"><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_e_x_p_a_p_i_queue_delegate-p.html#adda3044806531c25563271f7ed94f368">statementsStored:</a></td></tr>
<tr class="memdesc:adda3044806531c25563271f7ed94f368"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked when a single batch of statements from the queue have successfully persisted to the LRS.  <a href="#adda3044806531c25563271f7ed94f368">More...</a><br /></td></tr>
<tr class="separator:adda3044806531c25563271f7ed94f368"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fa6d4834154a14ccde37523936ee8a6"><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="protocol_e_x_p_a_p_i_queue_delegate-p.html#a7fa6d4834154a14ccde37523936ee8a6">statementsFailed:withError:</a></td></tr>
<tr class="memdesc:a7fa6d4834154a14ccde37523936ee8a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invoked when a single batch of statements from the queue failed to persist to the LRS for a (potentially) permanent reason.  <a href="#a7fa6d4834154a14ccde37523936ee8a6">More...</a><br /></td></tr>
<tr class="separator:a7fa6d4834154a14ccde37523936ee8a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Classes implementing the <a class="el" href="protocol_e_x_p_a_p_i_queue_delegate-p.html" title="Classes implementing the EXPAPIQueueDelegate protocol are eligible for receiving delegate callbacks f...">EXPAPIQueueDelegate</a> protocol are eligible for receiving delegate callbacks from a <a class="el" href="interface_e_x_p_a_p_i.html" title="Convenience class for interacting with the xAPI. ">EXPAPI</a> instance about the status of statements it has in its queue. </p>
<p>Implementations will be invoked when statements have successfully been persisted to the LRS and when statements were unable to be persisted to the LRS due to a (potentially) permanent issue. Notably, the only "non-permanent" failures that implementations will not be notified of include requests timing out or failing due to a lack of Internet access.</p>
<p>Typically, most implementations will only have one instance of <a class="el" href="interface_e_x_p_a_p_i.html" title="Convenience class for interacting with the xAPI. ">EXPAPI</a> (the defaultAPI) which means that most implementations will only have one statement queue. As such, there can only be one <a class="el" href="protocol_e_x_p_a_p_i_queue_delegate-p.html" title="Classes implementing the EXPAPIQueueDelegate protocol are eligible for receiving delegate callbacks f...">EXPAPIQueueDelegate</a>. It is recommended that implementations create a single class responsible for handling these callbacks. This class could be the application delegate.</p>
<p>If your application only needs to know when statements have successfully made it to the server so that it can update various views, you can add observers to the NSNotificationCenter for the EXPStatementsPersistedNotification. </p>
</div><h2 class="groupheader">Method Documentation</h2>
<a class="anchor" id="a7fa6d4834154a14ccde37523936ee8a6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) statementsFailed: </td>
          <td></td>
          <td class="paramtype">(NSArray *)&#160;</td>
          <td class="paramname"><em>statements</em></td>
        </tr>
        <tr>
          <td class="paramkey">withError:</td>
          <td></td>
          <td class="paramtype">(NSError *)&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">optional</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Invoked when a single batch of statements from the queue failed to persist to the LRS for a (potentially) permanent reason. </p>
<p>The statements may need modified before being sent again. By default, a batch is a maximum of 50 statements meaning that if more than 50 statements were sent to the LRS, this method could possibly be invoked multiple times. It is possible for a batch of statements to succeed and a batch of statements if multiple batches are sent to the server at the same time. This method is not invoked if the failure is due to a request timing out or an Internet connection not being available. In those cases, the statements are left in the queue and retried the next time the queue is processed. These method is invoked when a more serious error with the statements was encountered&ndash;this includes both client side (invalid information in the statement) and server side (the server is down for maintenance).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">statements</td><td>Contains an array of statements that failed to persist to the LRS. These statements are still in the statement queue and by default, will be sent to the server again the next time the queue is processed. </td></tr>
    <tr><td class="paramname">error</td><td>The error encountered when attempting to persist the statements to the LRS. The code of the error will match the HTTP status code returned from the server (or an inferred status code if the library cancelled the request before it was sent due to a validation issue. The localized description will contain the message returned from the server. It is likely that this message will not be user-friendly. You can enable niceErrorMessages on each <a class="el" href="interface_e_x_p_a_p_i_request.html" title="A wrapper for NSURLConnection to easily make requests to a server. ">EXPAPIRequest</a> instance to return cleaner error messages, but those error messages are not descriptive of the specific problem.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>It is expected that implementations of this method will return YES if the statement queue should be left alone despite this failure. The failed statements will be attempted again. If the statements have become irrelevant since being added to the queue, you may return NO to wipe ALL of the statements out of the queue&ndash;not just the failed ones.</dd></dl>
<dl class="section remark"><dt>Remarks</dt><dd>After the delegate method is invoked, a notification named EXPStatementsFailedPersistingNotification is posted to the notification center. Refer to the <a class="el" href="interface_e_x_p_a_p_i.html" title="Convenience class for interacting with the xAPI. ">EXPAPI</a> docs for the contents of the userInfo dictionary. </dd></dl>

</div>
</div>
<a class="anchor" id="adda3044806531c25563271f7ed94f368"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">- (void) statementsStored: </td>
          <td></td>
          <td class="paramtype">(NSArray *)&#160;</td>
          <td class="paramname"><em>statements</em></td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">optional</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Invoked when a single batch of statements from the queue have successfully persisted to the LRS. </p>
<p>By default, a batch is a maximum of 50 statements meaning that if more than 50 statements were sent to the LRS, this method could possibly be invoked multiple times.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">statements</td><td>Contains an array of statements that successfully persisted to the LRS. Statements have been modified to include the statement id set by the LRS.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section remark"><dt>Remarks</dt><dd>After the delegate method is invoked, a notification named EXPStatementsPersistedNotification is posted to the notification center. Refer to the <a class="el" href="interface_e_x_p_a_p_i.html" title="Convenience class for interacting with the xAPI. ">EXPAPI</a> docs for the contents of the userInfo dictionary. </dd></dl>

</div>
</div>
</div><!-- contents -->
<hr class="footer">
<address class="footer"><small>
&copy;2015 <a href="http://floatlearning.com">Float Mobile Learning</a>
</small></address>